<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="500">
  <style>
    text { font-family: sans-serif; }
    .box { stroke-width: 2; }
    .arrow { stroke: #2d3748; stroke-width: 2; fill: none; }
    .label { font-size: 14px; fill: #2d3748; font-weight: 500; }
    .note { font-size: 12px; fill: #4a5568; }
    .timeline { stroke: #4299e1; stroke-width: 3; }
    .memory { fill: #faf5ff; stroke: #9f7aea; }
    .process { fill: #e6fffa; stroke: #38b2ac; }
    .step { font-size: 12px; fill: #2d3748; }
  </style>
  
  <!-- 背景 -->
  <rect x="0" y="0" width="800" height="500" fill="#f7fafc"/>
  
  <!-- メインの実行タイムライン -->
  <line x1="100" y1="50" x2="700" y2="50" class="timeline"/>
  <text x="50" y="55" class="label">時間軸</text>
  
  <!-- 実行ステップ -->
  <circle cx="150" cy="50" r="5" fill="#4299e1"/>
  <text x="150" y="30" text-anchor="middle" class="step">1. DB処理開始</text>
  
  <circle cx="300" cy="50" r="5" fill="#4299e1"/>
  <text x="300" y="30" text-anchor="middle" class="step">2. 他の処理実行</text>
  
  <circle cx="450" cy="50" r="5" fill="#4299e1"/>
  <text x="450" y="30" text-anchor="middle" class="step">3. DB結果取得</text>
  
  <circle cx="600" cy="50" r="5" fill="#4299e1"/>
  <text x="600" y="30" text-anchor="middle" class="step">4. 結果を処理</text>
  
  <!-- 処理の流れを示す矢印 -->
  <path d="M150,55 L150,120 L450,120 L450,55" class="arrow" fill="none"/>
  <text x="300" y="110" text-anchor="middle" class="note">DBクエリの結果を待機中</text>
  
  <!-- メモリ領域 -->
  <rect x="100" y="150" width="600" height="80" class="memory"/>
  <text x="400" y="195" text-anchor="middle" class="label">メモリ（コールバックとデータの一時保存）</text>
  
  <!-- 補足説明 -->
  <rect x="50" y="270" width="700" height="120" fill="#e2e8f0" stroke="#718096" stroke-width="1" rx="5"/>
  <text x="400" y="300" text-anchor="middle" class="note">JavaScriptはシングルスレッドで動作します。1本の実行ラインで全ての処理を行います。</text>
  <text x="400" y="330" text-anchor="middle" class="note">非同期処理（DBクエリなど）を開始すると、その結果を待つ間、他の処理を実行できます。</text>
  <text x="400" y="360" text-anchor="middle" class="note">結果はメモリに保存され、適切なタイミングで取り出して処理を再開します。</text>
  
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2d3748"/>
    </marker>
  </defs>
</svg> 