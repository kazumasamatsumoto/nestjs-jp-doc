<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
    <!-- 背景 -->
    <rect width="800" height="600" fill="#f5f5f5"/>
    
    <!-- タイトル -->
    <rect x="50" y="20" width="700" height="50" rx="4" fill="#424242"/>
    <text x="400" y="50" text-anchor="middle" fill="white" font-size="20">基盤機能群</text>
    
    <!-- スコープ制御 -->
    <rect x="60" y="90" width="340" height="200" rx="4" fill="#9E9E9E"/>
    <rect x="70" y="125" width="320" height="155" rx="2" fill="white"/>
    <text x="230" y="115" text-anchor="middle" fill="#212121" font-size="16">スコープ制御</text>
    <text x="80" y="145" fill="#212121" font-size="12">目的：リクエストスコープの管理と制御</text>
    <text x="80" y="175" fill="#212121" font-size="12">責務：</text>
    <text x="90" y="195" fill="#212121" font-size="12">・リクエストスコープのライフサイクル管理</text>
    <text x="90" y="210" fill="#212121" font-size="12">・依存関係の注入と管理</text>
    <text x="90" y="225" fill="#212121" font-size="12">・マルチテナント環境のサポート</text>
    <text x="90" y="240" fill="#212121" font-size="12">・リクエスト単位のキャッシング</text>
    <text x="90" y="255" fill="#212121" font-size="12">・リクエストコンテキストの維持</text>
    
    <!-- エラーハンドリング -->
    <rect x="410" y="90" width="340" height="200" rx="4" fill="#9E9E9E"/>
    <rect x="420" y="125" width="320" height="155" rx="2" fill="white"/>
    <text x="580" y="115" text-anchor="middle" fill="#212121" font-size="16">エラーハンドリング</text>
    <text x="430" y="145" fill="#212121" font-size="12">目的：例外の適切な処理と応答の統一</text>
    <text x="430" y="175" fill="#212121" font-size="12">責務：</text>
    <text x="440" y="195" fill="#212121" font-size="12">・例外のキャッチと処理</text>
    <text x="440" y="210" fill="#212121" font-size="12">・HTTPエラーレスポンスの生成</text>
    <text x="440" y="225" fill="#212121" font-size="12">・カスタム例外フィルターの適用</text>
    <text x="440" y="240" fill="#212121" font-size="12">・グローバルエラーハンドリング</text>
    <text x="440" y="255" fill="#212121" font-size="12">・エラーログの記録</text>
    
    <!-- ライフサイクル -->
    <rect x="60" y="310" width="690" height="200" rx="4" fill="#9E9E9E"/>
    <rect x="70" y="345" width="670" height="155" rx="2" fill="white"/>
    <text x="405" y="335" text-anchor="middle" fill="#212121" font-size="16">コントローラーライフサイクル</text>
    <text x="80" y="365" fill="#212121" font-size="12">目的：リクエスト処理の一貫性とフック制御</text>
    <text x="80" y="395" fill="#212121" font-size="12">責務：</text>
    
    <!-- ライフサイクルの段階 -->
    <g transform="translate(90,415)">
        <rect x="0" y="0" width="120" height="70" rx="2" fill="#F5F5F5"/>
        <text x="60" y="20" text-anchor="middle" fill="#212121" font-size="11">初期化</text>
        <text x="60" y="40" text-anchor="middle" fill="#212121" font-size="10">・依存関係の解決</text>
        <text x="60" y="55" text-anchor="middle" fill="#212121" font-size="10">・インスタンス生成</text>
    </g>
    
    <g transform="translate(220,415)">
        <rect x="0" y="0" width="120" height="70" rx="2" fill="#F5F5F5"/>
        <text x="60" y="20" text-anchor="middle" fill="#212121" font-size="11">前処理</text>
        <text x="60" y="40" text-anchor="middle" fill="#212121" font-size="10">・ガードの実行</text>
        <text x="60" y="55" text-anchor="middle" fill="#212121" font-size="10">・インターセプター</text>
    </g>
    
    <g transform="translate(350,415)">
        <rect x="0" y="0" width="120" height="70" rx="2" fill="#F5F5F5"/>
        <text x="60" y="20" text-anchor="middle" fill="#212121" font-size="11">実行</text>
        <text x="60" y="40" text-anchor="middle" fill="#212121" font-size="10">・パイプの適用</text>
        <text x="60" y="55" text-anchor="middle" fill="#212121" font-size="10">・ハンドラー実行</text>
    </g>
    
    <g transform="translate(480,415)">
        <rect x="0" y="0" width="120" height="70" rx="2" fill="#F5F5F5"/>
        <text x="60" y="20" text-anchor="middle" fill="#212121" font-size="11">後処理</text>
        <text x="60" y="40" text-anchor="middle" fill="#212121" font-size="10">・レスポンス加工</text>
        <text x="60" y="55" text-anchor="middle" fill="#212121" font-size="10">・例外処理</text>
    </g>
    
    <g transform="translate(610,415)">
        <rect x="0" y="0" width="120" height="70" rx="2" fill="#F5F5F5"/>
        <text x="60" y="20" text-anchor="middle" fill="#212121" font-size="11">終了処理</text>
        <text x="60" y="40" text-anchor="middle" fill="#212121" font-size="10">・リソース解放</text>
        <text x="60" y="55" text-anchor="middle" fill="#212121" font-size="10">・クリーンアップ</text>
    </g>
</svg>
